{"version":3,"sources":["./src/app/pages/stato/stato.page.html","./src/app/pages/stato/stato.module.ts","./src/app/pages/stato/stato.page.scss","./src/app/pages/stato/stato.page.ts","./src/app/services/statuses.service.ts"],"names":[],"mappings":"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","file":"pages-stato-stato-module-es2015.js","sourcesContent":["module.exports = \"<ion-content (swipeleft)=\\\"swipeLeft()\\\" (swiperight)=\\\"swipeRight()\\\">\\n  <form [formGroup]=\\\"form\\\">\\n    <ion-item class=\\\"stato-personale\\\">\\n      <div class=\\\"fileUpload\\\">\\n        <span>\\n          <ion-button slot=\\\"start\\\" fill=\\\"clear\\\" class=\\\"cont-btn--btn\\\">\\n            <ion-icon class=\\\"icons\\\" name=\\\"add\\\"></ion-icon>\\n          </ion-button>\\n        </span>\\n\\n        <input class=\\\"upload\\\" (change)=\\\"getFile($event)\\\" formControlName=\\\"foto\\\" type=\\\"file\\\">\\n      </div>\\n      <ion-button slot=\\\"end\\\" fill=\\\"clear\\\" class=\\\"cont-btn--btn\\\" (click)=\\\"addCameraPhoto()\\\">\\n        <ion-icon name=\\\"camera\\\"></ion-icon>\\n      </ion-button>\\n    </ion-item>\\n  </form>\\n\\n  <div *ngFor=\\\"let stato of personalStatus\\\" class=\\\"separatore\\\">\\n    <p class=\\\"separatore--testo\\\">Il mio stato</p>\\n  </div>\\n  <div *ngFor=\\\"let stato of personalStatus\\\">\\n    <ion-item (click)=\\\"openPhoto(stato.payload.val().status);\\\" class=\\\"stato-personalee\\\">\\n      <ion-avatar slot=\\\"start\\\">\\n        <img src=\\\"{{stato.payload.val().status}}\\\">\\n      </ion-avatar>\\n      <ion-label>\\n        <ion-text>{{stato.payload.val().firstname}} {{stato.payload.val().lastname}}</ion-text>\\n      </ion-label>\\n      <ion-button fill=\\\"clear\\\" slot=\\\"end\\\" (click)=\\\"removeStatus();\\\">\\n        <ion-icon name=\\\"close\\\"></ion-icon>\\n      </ion-button>\\n\\n    </ion-item>\\n\\n\\n  </div>\\n  <div class=\\\"separatore\\\">\\n    <p class=\\\"separatore--testo\\\">Aggiornamenti recenti</p>\\n  </div>\\n  <ion-item class=\\\"stato-personalee\\\" *ngIf=\\\"statuses.length == 0\\\">\\n    <span>Nessun aggiornamento...</span>\\n  </ion-item>\\n\\n\\n  <ion-item *ngFor=\\\"let stato of statuses\\\" (click)=\\\"openPhoto(stato.payload.val().status);\\\" class=\\\"stato-personalee\\\">\\n    <ion-avatar slot=\\\"start\\\">\\n      <img src=\\\"{{stato.payload.val().status}}\\\">\\n    </ion-avatar>\\n    <ion-label>\\n      <ion-text>{{stato.payload.val().firstname}} {{stato.payload.val().lastname}}</ion-text>\\n    </ion-label>\\n  </ion-item>\\n\\n\\n\\n</ion-content>\"","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { StatoPage } from './stato.page';\nimport { SharedModule } from 'src/app/shared/shared.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: StatoPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    SharedModule,\n    IonicModule,\n    RouterModule.forChild(routes)\n  ],\n  declarations: [StatoPage]\n})\nexport class StatoPageModule {}\n","module.exports = \"in-content {\\n  --padding-bottom: 20%;\\n}\\n\\n.separatore {\\n  width: 100%;\\n  height: 27px;\\n  background-color: rgba(0, 0, 0, 0.06);\\n  margin-top: 10px 0 10px 0;\\n}\\n\\n.separatore--testo {\\n  padding: 5px 0 0 15px;\\n  font-size: 13px;\\n  color: rgba(0, 0, 0, 0.5);\\n}\\n\\n.stato-personale {\\n  --border-color: transparent;\\n  --padding-start: 80px;\\n  --padding-end: 80px;\\n}\\n\\n.stato-personalee {\\n  --border-color: transparent;\\n  --padding-start: 40px;\\n  --padding-end: 40px;\\n}\\n\\n#removeStatus {\\n  cursor: pointer !important;\\n}\\n\\n.fileUpload {\\n  position: relative;\\n  overflow: hidden;\\n  margin: 10px;\\n}\\n\\n.fileUpload input.upload {\\n  position: absolute;\\n  top: 0;\\n  right: 0;\\n  margin: 0;\\n  padding: 0;\\n  font-size: 20px;\\n  cursor: pointer;\\n  opacity: 0;\\n  filter: alpha(opacity=0);\\n}\\n\\n.icons {\\n  font-size: 24px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2RhdmlkZS9TY3JpdmFuaWEvbnVvdmlQcm9nZXR0aS90ZWxsbWUvdGVsbE1lL3NyYy9hcHAvcGFnZXMvc3RhdG8vc3RhdG8ucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9zdGF0by9zdGF0by5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxxQkFBQTtBQ0NKOztBREVBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7RUFDQSxxQ0FBQTtFQUNBLHlCQUFBO0FDQ0o7O0FEQ0k7RUFDSSxxQkFBQTtFQUNBLGVBQUE7RUFDQSx5QkFBQTtBQ0NSOztBREdBO0VBQ0ksMkJBQUE7RUFDQSxxQkFBQTtFQUNBLG1CQUFBO0FDQUo7O0FER0E7RUFDSSwyQkFBQTtFQUNBLHFCQUFBO0VBQ0EsbUJBQUE7QUNBSjs7QURLQTtFQUNJLDBCQUFBO0FDRko7O0FETUE7RUFDSSxrQkFBQTtFQUNBLGdCQUFBO0VBQ0EsWUFBQTtBQ0hKOztBRE9BO0VBQ0ksa0JBQUE7RUFDQSxNQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxVQUFBO0VBQ0EsZUFBQTtFQUNBLGVBQUE7RUFDQSxVQUFBO0VBQ0Esd0JBQUE7QUNKSjs7QURPQTtFQUNJLGVBQUE7QUNKSiIsImZpbGUiOiJzcmMvYXBwL3BhZ2VzL3N0YXRvL3N0YXRvLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbImluLWNvbnRlbnR7XG4gICAgLS1wYWRkaW5nLWJvdHRvbTogMjAlO1xufVxuXG4uc2VwYXJhdG9yZSB7XG4gICAgd2lkdGg6IDEwMCU7XG4gICAgaGVpZ2h0OiAyN3B4O1xuICAgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoJGNvbG9yOiAjMDAwMDAwLCAkYWxwaGE6IC4wNik7XG4gICAgbWFyZ2luLXRvcDogMTBweCAwIDEwcHggMDtcblxuICAgICYtLXRlc3RvIHtcbiAgICAgICAgcGFkZGluZzogNXB4IDAgMCAxNXB4O1xuICAgICAgICBmb250LXNpemU6IDEzcHg7XG4gICAgICAgIGNvbG9yOiByZ2JhKCRjb2xvcjogIzAwMDAwMCwgJGFscGhhOiAuNSk7XG4gICAgfVxufVxuXG4uc3RhdG8tcGVyc29uYWxlIHtcbiAgICAtLWJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgLS1wYWRkaW5nLXN0YXJ0OiA4MHB4O1xuICAgIC0tcGFkZGluZy1lbmQ6IDgwcHg7XG59XG5cbi5zdGF0by1wZXJzb25hbGVlIHtcbiAgICAtLWJvcmRlci1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gICAgLS1wYWRkaW5nLXN0YXJ0OiA0MHB4O1xuICAgIC0tcGFkZGluZy1lbmQ6IDQwcHg7XG59XG5cblxuXG4jcmVtb3ZlU3RhdHVzIHtcbiAgICBjdXJzb3I6IHBvaW50ZXIgIWltcG9ydGFudDtcbn1cblxuXG4uZmlsZVVwbG9hZCB7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgbWFyZ2luOiAxMHB4O1xuICAgIC8vIGxlZnQ6IDE3JTtcbn1cblxuLmZpbGVVcGxvYWQgaW5wdXQudXBsb2FkIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgdG9wOiAwO1xuICAgIHJpZ2h0OiAwO1xuICAgIG1hcmdpbjogMDtcbiAgICBwYWRkaW5nOiAwO1xuICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICBjdXJzb3I6IHBvaW50ZXI7XG4gICAgb3BhY2l0eTogMDtcbiAgICBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9MCk7XG59XG5cbi5pY29ucyB7XG4gICAgZm9udC1zaXplOiAyNHB4O1xufSIsImluLWNvbnRlbnQge1xuICAtLXBhZGRpbmctYm90dG9tOiAyMCU7XG59XG5cbi5zZXBhcmF0b3JlIHtcbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMjdweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgwLCAwLCAwLCAwLjA2KTtcbiAgbWFyZ2luLXRvcDogMTBweCAwIDEwcHggMDtcbn1cbi5zZXBhcmF0b3JlLS10ZXN0byB7XG4gIHBhZGRpbmc6IDVweCAwIDAgMTVweDtcbiAgZm9udC1zaXplOiAxM3B4O1xuICBjb2xvcjogcmdiYSgwLCAwLCAwLCAwLjUpO1xufVxuXG4uc3RhdG8tcGVyc29uYWxlIHtcbiAgLS1ib3JkZXItY29sb3I6IHRyYW5zcGFyZW50O1xuICAtLXBhZGRpbmctc3RhcnQ6IDgwcHg7XG4gIC0tcGFkZGluZy1lbmQ6IDgwcHg7XG59XG5cbi5zdGF0by1wZXJzb25hbGVlIHtcbiAgLS1ib3JkZXItY29sb3I6IHRyYW5zcGFyZW50O1xuICAtLXBhZGRpbmctc3RhcnQ6IDQwcHg7XG4gIC0tcGFkZGluZy1lbmQ6IDQwcHg7XG59XG5cbiNyZW1vdmVTdGF0dXMge1xuICBjdXJzb3I6IHBvaW50ZXIgIWltcG9ydGFudDtcbn1cblxuLmZpbGVVcGxvYWQge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIG1hcmdpbjogMTBweDtcbn1cblxuLmZpbGVVcGxvYWQgaW5wdXQudXBsb2FkIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDA7XG4gIHJpZ2h0OiAwO1xuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICBvcGFjaXR5OiAwO1xuICBmaWx0ZXI6IGFscGhhKG9wYWNpdHk9MCk7XG59XG5cbi5pY29ucyB7XG4gIGZvbnQtc2l6ZTogMjRweDtcbn0iXX0= */\"","import { AngularFireDatabase } from '@angular/fire/database';\nimport { PhotoModalPage } from './../photo-modal/photo-modal.page';\nimport { Camera, CameraOptions } from '@ionic-native/camera/ngx';\nimport { ChatService } from './../../services/chat.service';\nimport { Router } from '@angular/router';\nimport { StatusesService } from './../../services/statuses.service';\nimport { AuthService } from './../../services/auth.service';\nimport { FormGroup, FormBuilder, FormControl, Validators } from '@angular/forms';\nimport { Component, OnInit } from '@angular/core';\nimport { AngularFireStorage, AngularFireUploadTask } from '@angular/fire/storage';\nimport { UploadTask } from '@angular/fire/storage/interfaces';\nimport { UsersService } from 'src/app/services/users.service';\nimport { LoadingController, ModalController } from '@ionic/angular';\nimport { Observable } from 'rxjs';\n\n\n\n@Component({\n  selector: 'app-stato',\n  templateUrl: './stato.page.html',\n  styleUrls: ['./stato.page.scss'],\n})\nexport class StatoPage implements OnInit {\n  private form: FormGroup;\n  url: any;\n  idLogged: string;\n\n  file;\n  task: UploadTask;\n  statuses: any[] = [];\n  personalStatus: any[] = [];\n  statusExists;\n\n  friendsList;\n  fileName: any;\n  friend = [];\n\n\n  selectedPhoto;\n\n\n\n\n  constructor(\n    private storage: AngularFireStorage,\n    private fb: AngularFireDatabase,\n    private formBuilder: FormBuilder,\n    private statusesService: StatusesService,\n    private authService: AuthService,\n    private usersService: UsersService,\n    private chatService: ChatService,\n    private camera: Camera,\n    public loadingController: LoadingController,\n    private modalController: ModalController,\n    private router: Router\n\n  ) {\n    this.idLogged = this.authService.getIdLoggedUser();\n    this.chatService.getFriendsList(this.idLogged).subscribe(res => {\n      this.friendsList = res.filter(item => {\n        return item.payload.key;\n      });\n    })\n    this.getMyStatus();\n    this.getListStatuses();\n\n    this.form = this.formBuilder.group({\n      foto: new FormControl('', Validators.required),\n    });\n  }\n\n  ngOnInit() {\n\n  }\n\n  ionViewWillEnter() {\n    this.getMyStatus();\n    this.getListStatuses();\n  }\n\n  addCameraPhoto() {\n    const options: CameraOptions = {\n      quality: 50,\n      destinationType: this.camera.DestinationType.DATA_URL,\n      encodingType: this.camera.EncodingType.JPEG,\n      mediaType: this.camera.MediaType.PICTURE,\n      correctOrientation: true,\n      saveToPhotoAlbum: false //true in prod,\n      // popoverOptions: new CameraPopoverOptions //slider di foto della gallery,ma funge solo con ios\n\n    }\n\n    this.camera.getPicture(options).then((imageData) => {\n      let base64Image = 'data:image/jpeg;base64,' + imageData;\n      this.add(base64Image);\n    }, (err) => {\n      alert(err)\n    });\n  }\n\n  async add(image) {\n    this.fileName = 'status';\n\n    this.task = this.statusesService.upLoad(this.idLogged, this.fileName).putString(image, 'data_url');\n\n    // let progress = (this.task.snapshot.bytesTransferred / this.task.snapshot.totalBytes) * 100;\n\n    // alert(progress)\n\n\n    this.task.then(() => {\n      this.statusesService.upLoad(this.idLogged, this.fileName).getDownloadURL().then(url => {\n        this.url = url;\n        this.usersService.getLogUserData(this.idLogged).subscribe(res => {\n          this.statusesService.saveStatus(this.idLogged).set({\n            status: this.url,\n            firstname: res[1],\n            lastname: res[2]\n          })\n        })\n\n\n      })\n    })\n  }\n\n\n  getFile(event) {\n    this.file = event.target.files[0];\n    setTimeout(() => {\n      this.addPhoto();\n    }, 200);\n  }\n\n  addPhoto() {\n\n    if (this.idLogged) {\n      this.fileName = 'status';\n      // this.presentLoading(timer);\n      this.task = this.statusesService.upLoad(this.idLogged, this.fileName).put(this.file);\n      this.task.then((p) => {\n        console.log(p.task.snapshot.state)\n      })\n      this.task.then(() => {\n        // this.authService.\n        this.statusesService.upLoad(this.idLogged, this.fileName).getDownloadURL().then(url => {\n          this.url = url;\n          this.usersService.getLogUserData(this.idLogged).subscribe(res => {\n            this.statusesService.saveStatus(this.idLogged).set({\n              status: this.url,\n              firstname: res[1],\n              lastname: res[2]\n            })\n          })\n\n\n        })\n        setTimeout(() => {\n          this.statusesService.removeStatus(this.idLogged);\n          this.statusesService.removeStatusStorage(this.idLogged, this.fileName);\n        }, 86400000);\n      })\n    } else {\n      this.authService.logOut();\n    }\n    // this.task.then(res => {\n    //   console.log(res.downloadURL);\n    // })\n    // percentage.subscribe(res => {\n    //   // console.log(res);\n    // })\n    this.file = null;\n  }\n\n\n  async getListStatuses() {\n    this.statusesService.getListStatus().snapshotChanges().subscribe(res => {\n      this.statuses = res.filter(item => {\n        for (let i = 0; i < this.friendsList.length; i++) {\n          this.friend.push(this.friendsList[i].key);\n        }\n        if (this.friend.includes(item.key)) {\n          return item;\n        }\n      });\n    });\n  }\n\n\n\n  async getMyStatus() {\n    this.statusesService.getMyStatus().snapshotChanges().subscribe(res => {\n      this.personalStatus = res.filter(item => {\n        return item.key === this.idLogged\n      });\n\n    });\n  }\n\n  async removeStatus() {\n    this.statusesService.removeStatus(this.idLogged);\n    this.statusesService.removeStatusStorage(this.idLogged, this.fileName);\n\n  }\n\n\n  async presentLoading() {\n    const loading = await this.loadingController.create({\n      message: 'Caricamento..',\n      duration: 5000\n    });\n    await loading.present();\n\n    const { role, data } = await loading.onDidDismiss();\n\n    console.log('Loading dismissed!');\n  }\n\n  openPhoto(url) {\n    this.presentModal(url)\n  }\n\n  async presentModal(url) {\n    const modal = await this.modalController.create({\n      component: PhotoModalPage,\n      componentProps: { url: url }\n    });\n    return await modal.present();\n  }\n\n\n\n  swipeLeft() {\n    this.router.navigateByUrl('/home/utenti');\n  }\n  swipeRight() {\n    this.router.navigateByUrl('/home/chat');\n  }\n\n\n}\n","import { AngularFireDatabase } from '@angular/fire/database';\nimport { AngularFireStorage } from '@angular/fire/storage';\nimport { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class StatusesService {\n\n  constructor(\n    private storage: AngularFireStorage,\n    private db: AngularFireDatabase\n  ) { }\n\n\n  upLoad(idLogged, fileName) {\n    return this.storage.storage.ref(`statuses/${idLogged}/${fileName}.jpg`);\n  }\n\n  saveStatus(idLogged) {\n    return this.db.database.ref(`/statuses/${idLogged}/`);\n  }\n\n  getListStatus() {\n    return this.db.list('/statuses/');\n  }\n\n  removeStatus(idLogged) {\n    this.db.database.ref(`statuses/${idLogged}`).remove();\n  }\n\n  removeStatusStorage(idLogged, filename) {\n    this.storage.storage.ref(`statuses/${idLogged}/${filename}`).delete();\n  }\n\n  getMyStatus() {\n    return this.db.list('/statuses/');\n  }\n}\n"],"sourceRoot":""}